<!DOCTYPE html>
<html>
<head>
	<title>Poruya</title>
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/topuhit/Font-Bangla@1.0.3/1.0.0/font-bangla.css">

	<link rel="stylesheet" type="text/css" href="lib/style.css">
</head>
<body>

	<!-- <input type="file" id="fileToUpload"> -->
	<!-- <input type="file" id="fileToUpload" accept="application/pdf"> -->
	<!-- <embed src="t.pdf" width="700px" height="800px" alt="pdf"> -->

	<p class="display-4">
		<i class="fb-bangladesh-map"></i>
		<b>Put Some Input</b>
	</p>
	<!-- <textarea id="inputText" onkeyup="showHint(this.value)" onpaste="showHint(this.value)"></textarea> -->
	<textarea id="inputText" class="form-control" onkeyup="showHint(this.value)"></textarea>
	<br>
	<label class="btn btn-primary">
	    Browse <input type="file" id="textUpload" onchange="showText(this)" hidden>
	</label>
	
	<p>Suggestions: <br><span id="txtHint"></span></p>
	
</body>

<!-- <script src="lib/main.js"></script> -->

<script type="text/javascript" src="dataset/spell.json"></script>

<script type="text/javascript">

	function showHint(str) 
	{
	    //document.getElementById("txtHint").innerHTML = str;

		para = str;
		
		// pattern = /[^\s\W]+/g;
		//pattern = /[^\s!&?$*.,;|]+/g;
		pattern = /[^\s,;?!:.|।-]+/g;
		list = para.match(pattern);
		//console.log(list.length);

		var m = spellChecker(list);
		showResult(m);
		
	}

	function showResult(str) 
	{
	    document.getElementById("txtHint").innerHTML = str;
	}

	function showText(file)
	{	
		
		let reader = new FileReader();
		reader.readAsText(file.files[0]);
		reader.onload = function() {
			
			para = reader.result;
			pattern = /[^\s,;?!:.|।-]+/g;
			list = para.match(pattern);

			var m1 = list.join(" ");
			var m2 = spellChecker(list);

			document.getElementById("inputText").innerHTML = m1;
			showResult(m2);
		}	
	}

	function spellChecker(list)
	{	

		for(var i=0;i<list.length;i++)
		{
			if(banglaSpell[0][list[i].toLowerCase()] == undefined)
			{
				//list[i] += " - right";
				list[i] += " - সঠিক";
			}
			else
			{
				// list[i] += " - wrong";
				list[i] += " - "+banglaSpell[0][list[i].toLowerCase()];
				//spellMap[0][list[i]]
			}
		}
		return list.join("<br/>");
	}



</script>

</html>